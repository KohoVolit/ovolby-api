import api
import custom_functions as cf

items = cf.get_all_items("areas",where={"parents.area_id":"5301","parents.election_id":"europarl.europa.eu-cz-2009"})

for item in items:
    ds = api.get("results",where={"area_id":item['id'],"election_id":"europarl.europa.eu-cz-2009"})
    print(ds['_items'][0]['area_id'],ds['_items'][0]['summary'][0]['value'])
    
    
items = cf.get_all_items("results",where={"area_classification":"municipality","election_id":"europarl.europa.eu-cz-2009"})

t3 = 0
for item in items:
    t3 = t3 + int(item['summary'][0]['value'])
    
items = cf.get_all_items("results",where={"area_classification":"county","election_id":"europarl.europa.eu-cz-2009"})

t3 = 0
for item in items:
    t3 = t3 + int(item['summary'][0]['value'])
    
for row in vts['EP_T2P']['EP_T2P_ROW']:
    if row['OBEC']+'-'+row['OKRSEK'] == "506320-2":
        print(row)

t3 = 0
for row in vts['EP_T2P']['EP_T2P_ROW']:
    t3 = t3 + int(row['POC_HLASU'])

t4 = 0
for row in sums['EP_T2']['EP_T2_ROW']:
    t4 = t4 + int(row['PL_HL_CELK'])

506320-3
529621-4
529753-1
530565-1
533921-5
534013-2
535427-6
535915-1
536415-1
540757-5
541001-1
541699-3
542059-1
542415-3
544591-3
545171-8
547999-13
548341-1
548499-1
549118-1
549142-3
551040-2
553191-1
553450-4
553654-6
555835-3
556041-2
556301-2
556467-5
556467-7
556734-2
557200-5
557536-2
557536-4
557587-8
558125-3



results = cf.get_all_items("results",where={"area_classification":"district","election_id":"psp.cz-2100-2013"})

resultsobj = {}
for result in results:
    resultsobj[result["area_id"]] = result

li = ["513482", "529303", "529451", "529478", "529486", "529516", "529532", "529541", "529567", "529621", "529648", "529702", "529737", "529745", "529770", "529788", "529796", "529818", "529842", "529851", "529907", "529931", "529940", "529958", "529974", "529991", "530000", "530026", "530051", "530069", "530093", "530107", "530115", "530158", "530166", "530174", "530191", "530204", "530212", "530263", "530298", "530301", "530310", "530344", "530352", "530409", "530441", "530450", "530476", "530492", "530514", "530522", "530531", "530549", "530611", "530638", "530689", "530701", "530719", "530743", "530751", "530760", "530778", "530816", "530841", "530867", "530883", "530891", "530905", "530913", "530921", "530948", "531022", "531031", "531049", "532037", "532045", "532061", "532096", "532134", "532151", "532193", "532231", "532258", "532266", "532304", "532380", "532436", "532509", "532541", "532550", "532568", "532592", "532606", "532614", "532649", "532690", "532746", "532843", "532878", "532886", "532924", "532932", "532941", "533076", "533084", "534382", "538680", "538710", "571415", "599361", "599379", "599387", "599395"]

for item in li:
    r = cf.get_all_items("results",where={"area_id":item,"election_id":"psp.cz-2100-2013"})
#    if len(r) == 0:
    print(item)

items = cf.get_all_items("areas",where={"parents":{"$elemMatch":{"area_id":"2101","election_id":"psp.cz-2100-2013"}}})

n = 0
okrsky = []
for item in items:
    ts = cf.get_all_items("areas",where={"parents":{"$elemMatch":{"area_id":item['id'],"election_id":"psp.cz-2100-2013"}}})
    for t in ts:
        okrsky.append(t['id'])
    n = n + len(ts)

s = 0
for okrsek in okrsky:
    rs = cf.get_all_items("results",where={"area_id":okrsek[0],"election_id":"psp.cz-2100-2013"}) 
    for r in rs[0]['counts']:
        if r['option_identifier'] == '714':
            if int(r['votes']) != okrsek[1]:
                print(okrsek)
            s = s + int(r['votes'])
        
okrsky = [["529451-5",3], ["529303-17",16], ["529303-23",1], ["532592-1",2], ["529303-1",16], ["529303-11",3], ["532649-1",2], ["529940-1",3], ["529303-21",2], ["529303-18",15], ["599379-1",2], ["530689-2",5], ["529303-6",3], ["529303-4",12], ["530115-3",3], ["529478-1",2], ["532304-1",3], ["530310-5",2], ["530492-1",7], ["529303-9",7], ["529621-3",1], ["529851-1",2], ["530913-1",1], ["529486-5",4], ["530883-12",1], ["533076-1",4], ["530743-1",2], ["530514-1",1], ["531031-1",2], ["532690-1",1], ["530174-1",1], ["529907-1",3], ["529737-1",5], ["531022-1",8], ["529788-1",1], ["532941-1",3], ["532266-1",1], ["530093-1",1], ["530867-1",2], ["530905-6",3], ["530905-5",2], ["529842-2",1], ["530344-3",15], ["532550-1",2], ["532134-1",6], ["530701-1",8], ["530883-10",11], ["530531-1",7], ["530093-2",3], ["529770-1",2], ["530883-2",2], ["530069-1",2], ["599361-1",1], ["530000-1",7], ["599387-1",5], ["530905-7",5], ["530158-1",5], ["532436-1",1], ["530093-5",2], ["530883-8",12], ["533084-1",6], ["529702-1",2], ["530611-1",2], ["529931-1",6], ["530751-1",4], ["530883-6",10], ["530778-1",5], ["530212-1",6], ["530883-13",7], ["530883-9",8], ["529486-1",16], ["532541-1",3], ["530166-2",1], ["529532-1",8], ["529842-1",5], ["530301-1",4], ["530905-3",27], ["529702-2",13], ["530883-3",11], ["530948-1",3], ["530905-1",12], ["529648-1",10], ["530905-2",6], ["530344-1",1], ["530166-1",10], ["530891-1",2], ["530476-1",7], ["530107-1",7], ["530719-1",1], ["531049-1",11], ["530883-5",9], ["530883-11",8], ["530816-1",20], ["530883-7",13], ["534382-1",10], ["532606-1",1], ["571415-1",1], ["534382-5",2], ["532614-1",7], ["532151-1",2], ["530352-1",5], ["534382-4",12], ["529796-1",13], ["534382-2",8], ["529991-2",1], ["530760-1",9], ["529303-13",15], ["529303-20",3], ["530638-1",4], ["532061-1",8], ["529451-10",1], ["529796-2",5], ["529303-2",11], ["529991-3",2], ["529303-7",10], ["529303-16",9], ["534382-3",4], ["529451-7",6], ["532193-1",3], ["529303-19",22], ["532193-2",4], ["532045-1",2], ["530689-1",4], ["530263-2",1], ["529303-10",9], ["529451-8",2], ["530115-2",5], ["530204-1",19], ["530921-1",3], ["529303-5",14], ["530841-8",10], ["530841-11",2], ["529303-8",7], ["530841-7",1], ["532886-1",7], ["530841-1",17], ["530841-9",3], ["530841-4",13], ["530841-2",14], ["530841-12",5], ["529958-2",1], ["532924-1",11], ["530883-1",9], ["530883-4",10], ["529451-2",5], ["529303-14",12], ["529451-1",7], ["530441-1",18], ["529991-1",4], ["530841-6",3], ["529451-4",12], ["530310-2",2], ["529541-1",1], ["529451-3",3], ["530310-1",8], ["538680-1",40], ["529303-12",4], ["529818-1",6], ["529303-15",12], ["529745-1",2], ["538680-2",4], ["530115-1",8], ["530450-1",8], ["530310-3",2], ["529451-9",3], ["529621-1",14], ["529621-4",3], ["529303-3",5], ["529516-2",22], ["530263-1",2], ["538710-1",5], ["529516-1",29], ["529567-1",19], ["530841-5",4], ["530841-3",13], ["530051-1",8], ["530298-1",13], ["529958-1",5], ["513482-1",9], ["529974-3",1], ["530522-1",2]]

['530719-1', 1] '714'


